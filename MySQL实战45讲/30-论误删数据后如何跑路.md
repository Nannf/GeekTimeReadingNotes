#### 删数据的种类

1. delete 删了表中的几行数据
2. drop/truncate table 删了某张表
3. drop database 删了某个库
4. 使用rm命令删了数据库实例



#### 高可用架构对误删数据有用吗

**没用**，相反高可用会执行主库的语句而把所有实例上的状态都变得和主库一致。



#### 误删行之后的跑路方法

##### 前提

binlog_format=row;

binlog_row_image=full;(这个不知道是不是我遗漏了没看到这个东西)



##### 修复步骤

这个我们在高可用一节说过，因为当binlog_format=row的时候，会记录出修改的具体的行。我们做相反的操作即可

- 如果是插入操作，我们改为删除
- 如果是删除操作，我们改为插入
- 如果是更新操作，我们调换更新前后的值
- 如果是多个操作结合，那么恢复顺序和执行顺序相反
  - delete insert update
  - update insert delete

###### 问题

1. 因为误删数据之后，业务可能在你删除数据的基础上做了一些判断，而让你的业务数据朝着不可预料的方向发展，这就引入了第二条建议
2. 不建议在主库直接恢复，至于原因是因为主库已经在误删数据的基础上进行了一些业务判断，如果你在主库上恢复，相当于二次污染了数据，让数据变得不可控
3. 即使是binlog_format=row 也无法解决trancate和drop语句的删除

