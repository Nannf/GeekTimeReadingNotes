## 一条SQL查询语句是如何执行的？

1. 我们先登陆上mysql服务器
2. 运行mysql 命令和mysql服务器连接，这一步主要是三次握手，然后校验用户名密码，通过后从权限表中查询出用户权限作为连接属性一直持续到连接断开；负责处理这一步的模块是**连接器**模块；
3. 连接上之后，先把查询语句作为key到查询缓存中看能否获取到之前的查询结果，因为一旦对这个表进行改动，这个表的所有查询缓存都会被删除，所以只要查询的到，那一定是最新的，但是mysql8.0之后的版本移除了这个功能，这一步是**查询缓存模块**；
4. 如果没有查询到，程序会对查询sql进行编译，主要就是词法分析，语法分析，语义分析，比如识别到select，就知道这是一个查询语句，如果一切正常的话，会把from的后面解析为表，把select 和 from 之间的定义为列数据，这一步有个语义分析，如果查询的表不存在，或者查询的字段在表中不存在，会在这一步直接返回，这一步是**分析器模块**。
5. 分析完成后，按道理就可以进行查询了，但是出于性能考虑，需要对查询索引进行选择等等，这一步是**优化器模块**
6. 优化器模块生成了最终的执行计划，**执行器**会调用**存储引擎**对外提供的接口，就查询而言，会调用查询接口，一次获取出一些记录，然后和查询条件进行比对，把满足条件的加入返回结果集中。

