#### 前言

高可用。

上文我们在谈主备的时候，我们知道了主库在执行一条影响数据库状态的sql后，会把这个记录的binlog传给备库，备库接受这个binlog然后转换成中转日志，接着解析落库。

这一套执行下来就算是跑通的，就是主库和备库之间能达到最终一致性。

问题就在备库什么时候能达到和主库一致的状态，不然假设此时主库断电，你的备库和主库还差了数小时，那我们不能说主备就是高可用的。



所以高可用应该包含 最终一致性，而且主备之间的延迟要低。



##### 主备延迟

![img](https://static001.geekbang.org/resource/image/89/cc/89290bbcf454ff9a3dc5de42a85a69cc.png)

高可用意味着什么，意味着我们就算主库宕机了，无论是主动的还是被动的，我们的服务依然可以对外服务，这就要求主备之间的延迟不能太长，最好不要有。

我们