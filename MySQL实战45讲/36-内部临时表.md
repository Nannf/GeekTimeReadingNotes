#### 前言

什么叫内部临时表呢？纵观全文，其实是group by的时候使用了，所以本文叫group by 更让人明白。



sort_buffer - 排序时使用的

join_buffer - 连表查询做比对用的

内存临时表 - 这个时辅助sql执行的



作者使用了一段生硬的说辞，引出了内部临时表。



#### union

为了定量分析，建表如下

```mysql

create table t1(id int primary key, a int, b int, index(a));
delimiter ;;
create procedure idata()
begin
  declare i int;

  set i=1;
  while(i<=1000)do
    insert into t1 values(i, i, i);
    set i=i+1;
  end while;
end;;
delimiter ;
call idata();
```

执行语句

```mysql
(select 1000 as f) union (select id from t1 order by id desc limit 2);
```

**union的语义就是取两个子查询结果的并集**

**并集的含义就是两个集合加起来，重复的行只保留一行**



