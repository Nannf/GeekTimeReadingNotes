## 锁

### 出现的背景

数据库是共享的资源，会有多个线程同时对其访问。多线程并发访问的时候一定需要同步吗？是需要的，比如我在执行`select Id from T where age =14`的时候，同时`alter table T drop column age`,如果我不加同步操作，那我在查询语句执行的过程中，age字段被删除了，这个sql就会执行报错。这个问题不是无解。因为mysql默认的事务隔离级别是可重复读，在我们执行查询之前，其实已经创建了一个视图，你对表结构的改动，跟我的本次查询没啥关系。我们考虑的时候可以不考虑这个隔离级别，因为不是所有的存储引擎都支持事务。

那对我的查询语句来说，如果我先于更改表结构的语句先执行，那么我理所应当在查询结束前你才能改我的表结构。

