### 缘起

2021-06-20

在石家庄闲极无聊的一个周末。





2021-07-11

算是主线剧情刷完，一些感觉莫名其妙的补充意义不大，需要很多的背景知识，与主线没多大联系。

算是读完了。

磕磕绊绊的吧。

我在读到RateLimiter的时候其实就陷入了卡顿，因为那个是一个成熟的算法了。

这一个月我的时间基本都投入到这个模块上了。也算是收获颇丰，对整个java线程已有的并发工具类有了一个概览的了解。

作者的功力还是有的，正如作者所说，这个不是一个百科全书，作者也不是一个理论派的大家。

但是相较于理论派的大家，作者的叙述抓住了一个主线就是 线程之间的分工。

最理想的分工就是老死不相往来，但是现实情况而言，还是需要往来的，往来就意味着线程需要协作，同步一些消息。

这就涉及到这两个线程是有先后顺序的，还是可以并发执行的，还是是作为另一个任务的共同前提。

所以分工引入了协作问题，协作引入了线程间通信的问题。

当然还有线程安全问题。

这个其实再以分工为例去理解安全问题就不太妥当了。

如果我们看到的都是一个东西，那就不会出问题。

关键就在于不同的线程之间看到的是同一个东西，但是不一定是最新的那个。

所以我们引入了happens-before原则来保证了每个线程看到的都是最新的。

我们知道cpu是按时间片来调度程序的，关于一个大家都会访问的资源来说，我的操作不一定能立马完成。

这样说的意思其实对应的是原子性的概念，就是在cpu的一个运行时间片内，我的操作不一定可以完成，但是被我改了一半的资源无论是对我还是对别的线程而言，都是非法的。

所以关于临界区的概念应运而生。

接下来我的方向仍然是并发，这次我把目光投向了《java并发编程实战》这本书。
