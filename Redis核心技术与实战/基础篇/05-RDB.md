##### RDB

Redis DataBase

把某一个时刻的内存快照保存下来。





AOF的瓶颈

- aof文件大的时候，我们需要一条条的去执行，导致恢复的慢



RDB的运行综述

- 主线程fork子线程

  - 不影响主线程
  - 但是fork会阻塞主线程

- 快照哪些数据

  - 全部数据

- 如何online

  - 系统提供的写时复制
  - 实际写的时候，写的是一个副本
  - 这样保证了一致性

- 运行周期

  - 太慢增加丢失数据风险
    - 新增一个元数据，记录两次rdb之间的修改
    - 后来这个元数据换成了aof文件
  - 太快主线程在fork时会阻塞，内存越大，阻塞的越久

  