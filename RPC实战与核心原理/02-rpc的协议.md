#### 概览

作者试图从0到1，阐述rpc协议的制定思路，这种明知道答案，推导的过程不失为一种思路，但有些牵强附会之意。

但是对我而言有几点需要明白：

1. rpc竟然跟http一样是应用层协议，其实不难理解，基于传输层的只能是应用层。
2. rpc和http的优劣
3. 如何设置可扩展的协议





#### rpc是哪一层的协议

基于tcp传输的，tcp是传输层，只能是应用层协议。





#### rpc相较于http有何优势

如果要说明这个问题，需要明确我们的应用场景。

rpc和http的区别如下文所示

https://www.zhihu.com/question/41609070。

作者在这边做了一个误导，rpc和http不是不可以并行的，rpc是可以使用http协议封装的，grpc使用的是http2.0，dubbo使用的是自定义的tcp报文。

rpc并不是一个简单的数据传输，它的层次更高，面向的是服务治理，而服务之间的调用，只是治理的一个部分，其中包括服务发现，服务熔断，服务注册等，这些名词在微服务中很常见。

而且说http传输的时候一些无用的消息体比正文占比更大，造成了传输性能上的损耗，也是基于http1.x版本的，2.0 的版本已经解决了这个问题，所以grpc使用的是http协议。





#### 如何设置一个可扩展的协议

- 扩展意味着我需要新增东西，为了保证兼容，之前已经存在的东西我们没办法复用

所以扩展的核心就在我们要标识出新增的东西，如果是二进制流的话，我们需要预留出扩展字段的长度。



至于rpc协议中的协议头，长度多少这个暂时不关心。

